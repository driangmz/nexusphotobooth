<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>PRO Studio Booth | Ultimate Edition</title>
    
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="welcome-screen">
        <div class="welcome-content">
            <div class="brand-hero">
                <div class="brand-dot-hero"></div>
                <h1>STUDIO PRO</h1>
            </div>
            <p class="hero-tagline">The Ultimate Local-First Photography Suite.</p>
            
            <div class="hero-actions">
                <button class="btn-primary-lg" onclick="App.startSession()">ENTER STUDIO</button>
            </div>

            <div class="legal-links">
                <button onclick="UI.openLegal('privacy')">Privacy Policy</button>
                <span>|</span>
                <button onclick="UI.openLegal('terms')">Terms of Use</button>
            </div>
            
            <p class="version-tag">v3.5 Ultimate Edition • Client-Side Processing</p>
        </div>
    </div>

    <div id="modal-legal" class="modal-backdrop">
        <div class="modal-card legal-card">
            <div class="modal-head">
                <h3 id="legal-title">Legal</h3>
                <button class="icon-btn" onclick="UI.closeLegal()">✕</button>
            </div>
            <div class="modal-body legal-text" id="legal-content">
                </div>
            <div class="modal-foot">
                <button class="c-btn active" onclick="UI.closeLegal()">Close</button>
            </div>
        </div>
    </div>

    <div id="app-root" class="hidden">
        
        <header id="top-bar">
            <div class="brand">
                <div class="brand-dot"></div>
                <span>STUDIO PRO</span>
            </div>
            <div class="top-actions">
                <button class="icon-btn" onclick="UI.toggleModal('settings')" title="Settings">
                    <svg viewBox="0 0 24 24"><path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.06-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.06,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.43-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/></svg>
                </button>
                <button class="icon-btn" onclick="UI.toggleModal('info')" title="About">
                    <svg viewBox="0 0 24 24"><path d="M11,18h2v-2h-2V18z M12,2C6.48,2,2,6.48,2,12s4.48,10,10,10s10-4.48,10-10S17.52,2,12,2z M12,20c-4.41,0-8-3.59-8-8 s3.59-8,8-8s8,3.59,8,8S16.41,20,12,20z M12,6c-2.21,0-4,1.79-4,4h2c0-1.1,0.9-2,2-2s2,0.9,2,2c0,2-3,1.75-3,5h2c0-2.25,3-2.5,3-5 C16,7.79,14.21,6,12,6z"/></svg>
                </button>
            </div>
        </header>

        <main id="stage">
            <div class="viewfinder-box" id="vf-box">
                <video id="live-feed" autoplay playsinline muted></video>
                
                <div class="vf-overlay">
                    <div class="grid-lines" id="grid-lines">
                        <div class="gl-h" style="top:33%"></div>
                        <div class="gl-h" style="top:66%"></div>
                        <div class="gl-v" style="left:33%"></div>
                        <div class="gl-v" style="left:66%"></div>
                    </div>
                    
                    <div class="hud-top-right">
                        <div class="rec-tag"><div class="rec-dot"></div> REC</div>
                        <div class="rec-tag" style="background:transparent; border:none; color:var(--c-accent)">ISO AUTO</div>
                    </div>

                    <div class="hud-bottom-left">
                        <div>1080p 60fps</div>
                        <div class="histogram-container">
                            <canvas id="histogram-canvas"></canvas>
                        </div>
                        <div class="audio-vis-container" id="audio-vis">
                            </div>
                    </div>

                    <div id="countdown-overlay">3</div>
                    <div class="flash-layer" id="flash-layer"></div>
                </div>
            </div>
        </main>

        <section id="control-deck">
            
            <div class="filter-ribbon" id="filter-list">
                </div>

            <div class="main-controls">
                
                <div class="side-ctrl">
                    <span class="st-desc">LENS</span>
                    <div class="ctrl-btn-group">
                        <button class="c-btn active" onclick="Camera.switchLens('user')">Front</button>
                        <button class="c-btn" onclick="Camera.switchLens('environment')">Rear</button>
                    </div>
                    
                    <span class="st-desc" style="margin-top:10px">MODE</span>
                    <div class="ctrl-btn-group">
                        <button class="c-btn active" id="mode-single" onclick="Camera.setMode('single')">1x</button>
                        <button class="c-btn" id="mode-burst" onclick="Camera.setMode('burst')">3x</button>
                    </div>
                </div>

                <div class="shutter-wrapper">
                    <button id="btn-shutter" onclick="Camera.captureSequence()"></button>
                    <button class="flash-toggle-mini active" id="btn-flash" onclick="Camera.toggleFlash()">⚡</button>
                </div>

                <div class="side-ctrl">
                    <span class="st-desc">RATIO</span>
                    <div class="ctrl-btn-group">
                        <button class="c-btn" onclick="UI.setRatio('4-3')">4:3</button>
                        <button class="c-btn active" onclick="UI.setRatio('16-9')">16:9</button>
                        <button class="c-btn" onclick="UI.setRatio('1-1')">1:1</button>
                    </div>

                    <div class="gallery-pill" onclick="Gallery.open()">
                        <span>Gallery</span>
                        <div class="gallery-thumbs" id="mini-thumbs"></div>
                    </div>
                </div>

            </div>
        </section>

    </div>

    <div id="modal-settings" class="modal-backdrop">
        <div class="modal-card">
            <div class="modal-head">
                <h3>Settings</h3>
                <button class="icon-btn" onclick="UI.toggleModal('settings')">✕</button>
            </div>
            <div class="modal-body">
                <div class="st-row">
                    <div>
                        <span class="st-label">Mirror Front Camera</span>
                        <span class="st-desc">Flip selfie video horizontally</span>
                    </div>
                    <label class="toggle-sw"><input type="checkbox" id="set-mirror" checked onchange="State.settings.mirror = this.checked; UI.updateVideoStyles()"><span class="ts-track"></span></label>
                </div>
                <div class="st-row">
                    <div>
                        <span class="st-label">Grid Overlay</span>
                        <span class="st-desc">Rule of thirds guide</span>
                    </div>
                    <label class="toggle-sw"><input type="checkbox" id="set-grid" onchange="UI.toggleGrid(this.checked)"><span class="ts-track"></span></label>
                </div>
                <div class="st-row">
                    <div>
                        <span class="st-label">Voice Commands</span>
                        <span class="st-desc">Say "Cheese" or "Snap" to capture</span>
                    </div>
                    <label class="toggle-sw"><input type="checkbox" id="set-voice" onchange="Voice.toggle(this.checked)"><span class="ts-track"></span></label>
                </div>
                <div class="st-row">
                    <div>
                        <span class="st-label">HD Export</span>
                        <span class="st-desc">Save as PNG (Larger files)</span>
                    </div>
                    <label class="toggle-sw"><input type="checkbox" id="set-hd" onchange="State.settings.hd = this.checked"><span class="ts-track"></span></label>
                </div>
                <div class="st-row">
                    <div>
                        <span class="st-label">Watermark</span>
                        <span class="st-desc">Add date and studio name</span>
                    </div>
                    <label class="toggle-sw"><input type="checkbox" id="set-watermark" onchange="State.settings.watermark = this.checked"><span class="ts-track"></span></label>
                </div>
            </div>
        </div>
    </div>

    <div id="modal-info" class="modal-backdrop">
        <div class="modal-card">
            <div class="modal-head"><h3>About Studio Pro</h3><button class="icon-btn" onclick="UI.toggleModal('info')">✕</button></div>
            <div class="modal-body">
                <p><strong>Version 3.5 (Ultimate)</strong></p>
                <p style="color:#888; font-size:0.9rem;">
                    A client-side only photography suite designed for privacy and performance. 
                    Uses WebAssembly-ready canvas manipulation and WebAudio API for visualization.
                </p>
                <br>
                <p style="font-size:0.8rem; color:#666">© 2026 Studio Pro. All operations are local.</p>
            </div>
        </div>
    </div>

    <div id="gallery-viewer">
        <div class="gv-header">
            <h3>Gallery <span style="font-size:0.8rem; color:#666" id="gv-count">(0)</span></h3>
            <div style="display:flex; gap:10px;">
                <button class="c-btn" style="border:1px solid #333" onclick="Gallery.clear()">Delete All</button>
                <button class="c-btn active" onclick="Gallery.close()">Close</button>
            </div>
        </div>
        <div class="gv-grid" id="gv-grid">
            </div>
    </div>

    <div id="toast-container"></div>

    <canvas id="process-canvas" style="display:none;"></canvas>

    <script src="script.js"></script>
</body>
</html>
